(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{121:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return ActionEnum}));var ActionEnum,_Users_yangzhao_workspace_github_jigsaw_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(24),_Users_yangzhao_workspace_github_jigsaw_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(3),react__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(0),_utils_schema__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(43),_common_context__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(31);!function(ActionEnum){ActionEnum.INIT="INIT",ActionEnum.ADD="ADD",ActionEnum.DELETE="DELETE",ActionEnum.REPLACE="REPLACE",ActionEnum.CLONE="CLONE"}(ActionEnum||(ActionEnum={}));var isScheme=function isScheme(val){return void 0!==val.config};__webpack_exports__.b=function useSchema(){var _useContext=Object(react__WEBPACK_IMPORTED_MODULE_2__.useContext)(_common_context__WEBPACK_IMPORTED_MODULE_4__.a),store=_useContext.store,setStore=_useContext.setStore,activityId=store.activityId,schema=store.schema;return[store,function dispatch(type,payload){if(type===ActionEnum.ADD&&isScheme(payload)){var newSchema=Object(_utils_schema__WEBPACK_IMPORTED_MODULE_3__.a)(schema,activityId,payload);setStore(Object(_Users_yangzhao_workspace_github_jigsaw_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_1__.a)(Object(_Users_yangzhao_workspace_github_jigsaw_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_1__.a)({},store),{},{activityId:payload.id,schema:newSchema}))}else if(type===ActionEnum.DELETE&&isScheme(payload)){var id=payload.id,lastActivityId=Object(_utils_schema__WEBPACK_IMPORTED_MODULE_3__.e)(schema,payload),_newSchema=Object(_utils_schema__WEBPACK_IMPORTED_MODULE_3__.d)(schema,id);if(0===Object(_utils_schema__WEBPACK_IMPORTED_MODULE_3__.f)(_newSchema).length)return;setStore(Object(_Users_yangzhao_workspace_github_jigsaw_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_1__.a)(Object(_Users_yangzhao_workspace_github_jigsaw_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_1__.a)({},store),{},{activityId:lastActivityId,schema:_newSchema}))}else if(type===ActionEnum.CLONE&&isScheme(payload)){var _cloneDeepBy=Object(_utils_schema__WEBPACK_IMPORTED_MODULE_3__.c)(schema,activityId),_cloneDeepBy2=Object(_Users_yangzhao_workspace_github_jigsaw_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__.a)(_cloneDeepBy,2),_newSchema2=_cloneDeepBy2[0],rootId=_cloneDeepBy2[1];if(!schema[activityId].parent)throw new Error("can't clone");setStore(Object(_Users_yangzhao_workspace_github_jigsaw_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_1__.a)(Object(_Users_yangzhao_workspace_github_jigsaw_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_1__.a)({},store),{},{activityId:rootId,schema:_newSchema2}))}else if(type===ActionEnum.REPLACE&&function isReplace(val){return!!val.from}(payload)){var from=payload.from,to=payload.to,data=payload.data,_newSchema3=Object(_utils_schema__WEBPACK_IMPORTED_MODULE_3__.h)(schema,from,to);setStore(Object(_Users_yangzhao_workspace_github_jigsaw_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_1__.a)(Object(_Users_yangzhao_workspace_github_jigsaw_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_1__.a)({},store),{},{activityId:data.id,schema:_newSchema3}))}else if(type===ActionEnum.INIT&&function isManifest(val){return!!val.length}(payload)){var _initBy=Object(_utils_schema__WEBPACK_IMPORTED_MODULE_3__.g)(store,payload),_initBy2=Object(_Users_yangzhao_workspace_github_jigsaw_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__.a)(_initBy,2),_newSchema4=_initBy2[0],lastId=_initBy2[1];setStore(Object(_Users_yangzhao_workspace_github_jigsaw_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_1__.a)(Object(_Users_yangzhao_workspace_github_jigsaw_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_1__.a)({},store),{},{activityId:lastId,schema:_newSchema4}))}else;}]}},150:function(module,__webpack_exports__,__webpack_require__){"use strict";var _Users_yangzhao_workspace_github_jigsaw_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(24),react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(0),react__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__),_hooks_use_schema__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(121),_utils__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(20);__webpack_require__(731);__webpack_exports__.a=function Widget(_ref){var manifest=_ref.manifest,children=_ref.children,_useSchema=Object(_hooks_use_schema__WEBPACK_IMPORTED_MODULE_2__.b)(),_useSchema2=Object(_Users_yangzhao_workspace_github_jigsaw_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__.a)(_useSchema,2),store=_useSchema2[0],dispatch=_useSchema2[1];return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div",{"data-testid":"widget",className:"jigsaw-widget",onClick:function handleClick(){var schema=Object(_utils__WEBPACK_IMPORTED_MODULE_3__.a)(store,manifest);dispatch(_hooks_use_schema__WEBPACK_IMPORTED_MODULE_2__.a.ADD,schema)}},children)};try{widget.displayName="widget",widget.__docgenInfo={description:"",displayName:"widget",props:{manifest:{defaultValue:null,description:"",name:"manifest",required:!0,type:{name:"Manifest"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/widget/index.tsx#widget"]={docgenInfo:widget.__docgenInfo,name:"widget",path:"src/widget/index.tsx#widget"})}catch(__react_docgen_typescript_loader_error){}},151:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__(716);var App=__webpack_require__(152),react=__webpack_require__(0),react_default=__webpack_require__.n(react),floor_config={name:"Floor",width:"100%",x:0,y:0,height:650,canDrag:!1,canAddAsChild:!0,props:{}},manifest=__webpack_require__(180),floor_Floor=function Floor(_ref){var children=_ref.children;return react_default.a.createElement("div",null,children)},floor={view:Object(react.memo)(floor_Floor),config:floor_config,manifest:manifest.a},objectWithoutProperties=(__webpack_require__(64),__webpack_require__(186)),es_button=__webpack_require__(742),Button_config={name:"Button",width:100,height:30,canDrag:!0,canAddAsChild:!1,props:{btnText:"按钮"}},Button_manifest={name:"Button",version:"1.0.0"},Button_JsButton=(__webpack_require__(722),function JsButton(_ref){var btnText=_ref.btnText,props=Object(objectWithoutProperties.a)(_ref,["btnText"]);return react_default.a.createElement(es_button.a,Object.assign({className:"js-button"},props),btnText)}),components_Button={view:Object(react.memo)(Button_JsButton),config:Button_config,manifest:Button_manifest},card=__webpack_require__(740),Card_config={name:"Card",width:300,height:180,canDrag:!0,canAddAsChild:!0,props:{bordered:!1,title:"卡片"}},Card_manifest={name:"Card",version:"1.0.0"},Card_JsCard=(__webpack_require__(725),function JsCard(_ref){var children=_ref.children,props=Object(objectWithoutProperties.a)(_ref,["children"]);return react_default.a.createElement(card.a,Object.assign({className:"js-card"},props),children)}),components_Card={view:Object(react.memo)(Card_JsCard),config:Card_config,manifest:Card_manifest},componentMap={App:App.a,Floor:floor,Button:components_Button,Card:components_Card};__webpack_exports__.a=componentMap},152:function(module,__webpack_exports__,__webpack_require__){"use strict";var slicedToArray=__webpack_require__(24),react=__webpack_require__(0),react_default=__webpack_require__.n(react),use_schema=__webpack_require__(121),key_code={DELETE:"Backspace"},App_config={name:"App",canDrag:!1,canAddAsChild:!0,props:{}},App_manifest={name:"App",version:"1.0.0"},options=(__webpack_require__(720),{view:function App(_ref){var children=_ref.children,_useSchema=Object(use_schema.b)(),_useSchema2=Object(slicedToArray.a)(_useSchema,2),store=_useSchema2[0],dispatch=_useSchema2[1],activityId=store.activityId,schema=store.schema,handleKeyPress=function handleKeyPress(event){event.code===key_code.DELETE&&activityId&&dispatch(use_schema.a.DELETE,schema[activityId])};return Object(react.useEffect)((function(){return document.addEventListener("keydown",handleKeyPress),function(){document.removeEventListener("keydown",handleKeyPress)}}),[activityId]),react_default.a.createElement("div",{className:"jigsaw-app"},children)},config:App_config,manifest:App_manifest});__webpack_exports__.a=options},180:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_exports__.a={name:"Floor",version:"1.0.0"}},20:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"c",(function(){return isNumber})),__webpack_require__.d(__webpack_exports__,"d",(function(){return lastBy})),__webpack_require__.d(__webpack_exports__,"f",(function(){return number2px})),__webpack_require__.d(__webpack_exports__,"g",(function(){return uuid})),__webpack_require__.d(__webpack_exports__,"a",(function(){return createCpnSchema})),__webpack_require__.d(__webpack_exports__,"e",(function(){return minYby})),__webpack_require__.d(__webpack_exports__,"h",(function(){return windowToWrapper})),__webpack_require__.d(__webpack_exports__,"b",(function(){return getWrapperIdBy}));__webpack_require__(35),__webpack_require__(66),__webpack_require__(63),__webpack_require__(719),__webpack_require__(230),__webpack_require__(40),__webpack_require__(27),__webpack_require__(3);var isNumber=function isNumber(val){return"number"==typeof val},lastBy=function lastBy(arr){return arr[arr.length-1]},number2px=function number2px(val){if(function isDefine(val){return null!=val}(val))return"number"==typeof val?"".concat(val,"px"):val},uuidOffset=0,uuid=function uuid(){return uuidOffset++,(Date.now()+uuidOffset).toString(16).substr(3)},createCpnSchema=function createCpnSchema(store,manifest){var config=function findConfigById(store,name){var _store$configs;if(!(null==store||null===(_store$configs=store.configs)||void 0===_store$configs?void 0:_store$configs.length))throw new Error("please check config");var config=store.configs.find((function(config){return config.name===name}));if(!config)throw new Error("please check widget");return config}(store,manifest.name);return{manifest:manifest,config:config,props:config.props,id:uuid(),childrenId:[]}},minYby=function minYby(configs){for(var minY=0,i=0;i<configs.length;i++){var config=configs[i].config;minY<config.y+config.height&&(minY=config.y+config.height)}return minY},windowToWrapper=function windowToWrapper(ele,x,y){var box=ele.getBoundingClientRect();return{x:x-box.left,y:y-box.top}},getWrapperIdBy=function getWrapperIdBy(schema,item){for(var id=schema[item.id].parent;!schema[id].config.canAddAsChild;)id=schema[id].parent;return id}},31:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"b",(function(){return defaultContext}));__webpack_require__(77),__webpack_require__(169);var _Users_yangzhao_workspace_github_jigsaw_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(24),react__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(0),react__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_3__),_components__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(151),_components_App__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(152),config=_components_App__WEBPACK_IMPORTED_MODULE_5__.a.config,manifest=_components_App__WEBPACK_IMPORTED_MODULE_5__.a.manifest,defaultContext={store:{configs:Object.entries(_components__WEBPACK_IMPORTED_MODULE_4__.a).map((function(_ref){var _ref2=Object(_Users_yangzhao_workspace_github_jigsaw_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_2__.a)(_ref,2);_ref2[0];return _ref2[1].config})),activityId:"App",schema:{App:{id:"App",props:{},childrenId:[],config:config,manifest:manifest}},dragInfo:{}}},ctx=react__WEBPACK_IMPORTED_MODULE_3___default.a.createContext(defaultContext);__webpack_exports__.a=ctx},360:function(module,exports,__webpack_require__){__webpack_require__(361),__webpack_require__(516),__webpack_require__(517),__webpack_require__(710),module.exports=__webpack_require__(714)},428:function(module,exports){},43:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"f",(function(){return getRootChildren})),__webpack_require__.d(__webpack_exports__,"c",(function(){return schema_cloneDeepBy})),__webpack_require__.d(__webpack_exports__,"d",(function(){return schema_deleteBy})),__webpack_require__.d(__webpack_exports__,"a",(function(){return schema_addBy})),__webpack_require__.d(__webpack_exports__,"h",(function(){return schema_replaceBy})),__webpack_require__.d(__webpack_exports__,"g",(function(){return schema_initBy})),__webpack_require__.d(__webpack_exports__,"b",(function(){return schema_addFloorBy})),__webpack_require__.d(__webpack_exports__,"e",(function(){return findLastActivityId}));__webpack_require__(77),__webpack_require__(51),__webpack_require__(52),__webpack_require__(33),__webpack_require__(100),__webpack_require__(171),__webpack_require__(40),__webpack_require__(96),__webpack_require__(718);var DirectionEnum,defineProperty=__webpack_require__(27),toConsumableArray=__webpack_require__(104),objectSpread2=__webpack_require__(3);!function(DirectionEnum){DirectionEnum.TOP="TOP",DirectionEnum.BOTTOM="BOTTOM"}(DirectionEnum||(DirectionEnum={}));var floor_manifest=__webpack_require__(180),utils=__webpack_require__(20),getRootChildren=function getRootChildren(schema){return schema.App.childrenId},schema_cloneDeepBy=function cloneDeepBy(schema,id){for(var result={},schemaList=function cloneDeep(schema,id){var _target$childrenId,_ref,target=schema[id],newSchema=function clone(schema){return Object(objectSpread2.a)(Object(objectSpread2.a)({},schema),{},{id:Object(utils.g)()})}(target);if(0===(null===(_target$childrenId=target.childrenId)||void 0===_target$childrenId?void 0:_target$childrenId.length))return[newSchema];var childrenList=target.childrenId.map((function(id){return cloneDeep(schema,id)}));return childrenList.forEach((function(item){item[0].parent=newSchema.id})),newSchema.childrenId=childrenList.map((function(item){return item[0].id})),[newSchema].concat(Object(toConsumableArray.a)((_ref=[]).concat.apply(_ref,Object(toConsumableArray.a)(childrenList))))}(schema,id),rootId=schemaList[0].id,l=schemaList.length,i=0;i<l;i++){var t=schemaList[i];result[t.id]=t}return[Object(objectSpread2.a)(Object(objectSpread2.a)({},schema),result),rootId]},schema_deleteBy=function deleteBy(schema,id){var parent=schema[schema[id].parent],brother=null==parent?void 0:parent.childrenId,cloneSchema=Object(objectSpread2.a)({},schema);return function deepDelete(id){var cur=cloneSchema[id];0!==cur.childrenId.length?cur.childrenId.forEach((function(id){deepDelete(id)})):delete cloneSchema[id]}(id),Object(objectSpread2.a)(Object(objectSpread2.a)({},cloneSchema),{},Object(defineProperty.a)({},parent.id,Object(objectSpread2.a)(Object(objectSpread2.a)({},parent),{},{childrenId:null==brother?void 0:brother.filter((function(chId){return chId!==id}))})))},schema_addBy=function addBy(schema,id,payload){var _objectSpread3;if(!schema)return Object(defineProperty.a)({},payload.id,Object(objectSpread2.a)({},payload));for(var container=schema[id]||schema.App;!container.config.canAddAsChild;)container=schema[container.parent];var childrenList=container.childrenId.map((function(id){return schema[id]})),minY=Object(utils.e)(childrenList),newSchema=Object(objectSpread2.a)(Object(objectSpread2.a)({},payload),{},{parent:container.id,config:Object(objectSpread2.a)(Object(objectSpread2.a)({},payload.config),{},{x:0,y:minY})}),containerConfig=container.config,realHeight=containerConfig.height>minY+payload.config.height?containerConfig.height:minY+payload.config.height;return Object(objectSpread2.a)(Object(objectSpread2.a)({},schema),{},(_objectSpread3={},Object(defineProperty.a)(_objectSpread3,newSchema.id,newSchema),Object(defineProperty.a)(_objectSpread3,container.id,Object(objectSpread2.a)(Object(objectSpread2.a)({},container),{},{childrenId:[].concat(Object(toConsumableArray.a)(container.childrenId),[payload.id]),config:Object(objectSpread2.a)(Object(objectSpread2.a)({},containerConfig),{},{height:realHeight})})),_objectSpread3))},schema_replaceBy=function replaceBy(schema,from,to){var parent=schema[schema[from].parent],childrenId=null==parent?void 0:parent.childrenId,cloneSchema=Object(objectSpread2.a)({},schema),payload=Object(objectSpread2.a)({},cloneSchema[from]);delete cloneSchema[from];var realSchema=schema_addBy(schema,to,payload);return Object(objectSpread2.a)(Object(objectSpread2.a)({},realSchema),{},Object(defineProperty.a)({},parent.id,Object(objectSpread2.a)(Object(objectSpread2.a)({},parent),{},{childrenId:null==childrenId?void 0:childrenId.filter((function(chId){return chId!==from}))})))},schema_initBy=function initBy(store,manifests){var schemaList=manifests.map((function(manifest){return Object(utils.a)(store,manifest)})),schema=store.schema;return[schemaList.reduce((function(acc,cur){return schema_addBy(acc,cur.id,cur)}),schema),Object(utils.d)(schemaList).id]},schema_addFloorBy=function addFloorBy(store,direction){var _objectSpread5,schema=store.schema,activityId=store.activityId,newFloor=Object(utils.a)(store,floor_manifest.a),floor=function findFloorBy(schema,id){for(var floor=schema[id];"Floor"!==floor.manifest.name;)floor=schema[floor.parent];if(!floor)throw new Error("can't find floor");return floor}(schema,activityId),container=schema[floor.parent];newFloor.parent=container.id;var floorIds=Object(toConsumableArray.a)(container.childrenId),curIndex=floorIds.indexOf(floor.id);return direction===DirectionEnum.TOP?floorIds.splice(curIndex,0,newFloor.id):floorIds.splice(curIndex+1,0,newFloor.id),Object(objectSpread2.a)(Object(objectSpread2.a)({},store),{},{activityId:newFloor.id,schema:Object(objectSpread2.a)(Object(objectSpread2.a)({},schema),{},(_objectSpread5={},Object(defineProperty.a)(_objectSpread5,container.id,Object(objectSpread2.a)(Object(objectSpread2.a)({},container),{},{childrenId:floorIds})),Object(defineProperty.a)(_objectSpread5,newFloor.id,newFloor),_objectSpread5))})},findLastActivityId=function findLastActivityId(schema,payload){var childrenId=schema[payload.parent].childrenId;if(childrenId.length<=1)return payload.parent;var index=childrenId.indexOf(payload.id);return-1===index?payload.parent:0===index?childrenId[index+1]:childrenId[index-1]}},517:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__(295)},710:function(module,exports,__webpack_require__){"use strict";__webpack_require__(65),__webpack_require__(36),__webpack_require__(100),__webpack_require__(711),__webpack_require__(51),__webpack_require__(52),__webpack_require__(712),__webpack_require__(97),__webpack_require__(85);var _clientApi=__webpack_require__(161),_clientLogger=__webpack_require__(73),_configFilename=__webpack_require__(713);function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach((function(key){_defineProperty(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}(_configFilename.args||_configFilename.argTypes)&&_clientLogger.logger.warn("Invalid args/argTypes in config, ignoring.",JSON.stringify({args:_configFilename.args,argTypes:_configFilename.argTypes})),_configFilename.decorators&&_configFilename.decorators.forEach((function(decorator){return(0,_clientApi.addDecorator)(decorator,!1)})),_configFilename.loaders&&_configFilename.loaders.forEach((function(loader){return(0,_clientApi.addLoader)(loader,!1)})),(_configFilename.parameters||_configFilename.globals||_configFilename.globalTypes)&&(0,_clientApi.addParameters)(_objectSpread(_objectSpread({},_configFilename.parameters),{},{globals:_configFilename.globals,globalTypes:_configFilename.globalTypes}),!1),_configFilename.argTypesEnhancers&&_configFilename.argTypesEnhancers.forEach((function(enhancer){return(0,_clientApi.addArgTypesEnhancer)(enhancer)}))},713:function(module,exports){},714:function(module,exports,__webpack_require__){"use strict";(function(module){(0,__webpack_require__(295).configure)([__webpack_require__(715)],module,!1)}).call(this,__webpack_require__(160)(module))},715:function(module,exports,__webpack_require__){var map={"./container/container.stories.tsx":738,"./tools/tools.stories.tsx":729,"./widget/widget.stories.tsx":730,"./wrapper/wrapper.stories.tsx":737};function webpackContext(req){var id=webpackContextResolve(req);return __webpack_require__(id)}function webpackContextResolve(req){if(!__webpack_require__.o(map,req)){var e=new Error("Cannot find module '"+req+"'");throw e.code="MODULE_NOT_FOUND",e}return map[req]}webpackContext.keys=function webpackContextKeys(){return Object.keys(map)},webpackContext.resolve=webpackContextResolve,module.exports=webpackContext,webpackContext.id=715},720:function(module,exports,__webpack_require__){var api=__webpack_require__(86),content=__webpack_require__(721);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},721:function(module,exports,__webpack_require__){(exports=__webpack_require__(87)(!1)).push([module.i,".jigsaw-app{position:relative;width:375px;height:auto}\n",""]),module.exports=exports},722:function(module,exports,__webpack_require__){var api=__webpack_require__(86),content=__webpack_require__(723);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},723:function(module,exports,__webpack_require__){(exports=__webpack_require__(87)(!1)).push([module.i,".js-button{width:100%;height:100%;padding:0;overflow:hidden}\n",""]),module.exports=exports},725:function(module,exports,__webpack_require__){var api=__webpack_require__(86),content=__webpack_require__(726);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},726:function(module,exports,__webpack_require__){(exports=__webpack_require__(87)(!1)).push([module.i,".js-card{width:100%;height:100%;overflow:hidden;box-sizing:border-box}\n",""]),module.exports=exports},727:function(module,exports,__webpack_require__){var api=__webpack_require__(86),content=__webpack_require__(728);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},728:function(module,exports,__webpack_require__){(exports=__webpack_require__(87)(!1)).push([module.i,"",""]),module.exports=exports},729:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"WithBar",(function(){return WithBar})),__webpack_require__.d(__webpack_exports__,"WithBaz",(function(){return WithBaz}));var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(0),react__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);__webpack_exports__.default={title:"tools"};var WithBar=function WithBar(){return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("tools",{foo:"bar"})},WithBaz=function WithBaz(){return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("tools",{foo:"baz"})}},730:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"WidgetDemo",(function(){return WidgetDemo}));__webpack_require__(33);var _Users_yangzhao_workspace_github_jigsaw_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(104),_Users_yangzhao_workspace_github_jigsaw_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(3),_Users_yangzhao_workspace_github_jigsaw_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(24),react__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(0),react__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_4__),react_json_view__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(357),react_json_view__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(react_json_view__WEBPACK_IMPORTED_MODULE_5__),___WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(150),_common_context__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(31),manifest={name:"test",version:"0.0.1",icon:"",preview:""},Container=function Container(){var _useState=Object(react__WEBPACK_IMPORTED_MODULE_4__.useState)(_common_context__WEBPACK_IMPORTED_MODULE_7__.b.store),_useState2=Object(_Users_yangzhao_workspace_github_jigsaw_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_3__.a)(_useState,2),store=_useState2[0],setStore=_useState2[1];Object(react__WEBPACK_IMPORTED_MODULE_4__.useEffect)((function(){setStore(Object(_Users_yangzhao_workspace_github_jigsaw_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_2__.a)(Object(_Users_yangzhao_workspace_github_jigsaw_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_2__.a)({},store),{},{configs:[].concat(Object(_Users_yangzhao_workspace_github_jigsaw_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_1__.a)(store.configs),[{name:"test",width:100,height:100}])}))}),[]);var value={store:store,setStore:setStore};return react__WEBPACK_IMPORTED_MODULE_4___default.a.createElement("div",null,react__WEBPACK_IMPORTED_MODULE_4___default.a.createElement(_common_context__WEBPACK_IMPORTED_MODULE_7__.a.Provider,{value:value},react__WEBPACK_IMPORTED_MODULE_4___default.a.createElement(___WEBPACK_IMPORTED_MODULE_6__.a,{manifest:manifest},react__WEBPACK_IMPORTED_MODULE_4___default.a.createElement("div",null,"添加"))),react__WEBPACK_IMPORTED_MODULE_4___default.a.createElement(react_json_view__WEBPACK_IMPORTED_MODULE_5___default.a,{src:store.schema}))};__webpack_exports__.default={title:"Widget"};var WidgetDemo=function WidgetDemo(){return react__WEBPACK_IMPORTED_MODULE_4___default.a.createElement(Container,null)}},731:function(module,exports,__webpack_require__){var api=__webpack_require__(86),content=__webpack_require__(732);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},732:function(module,exports,__webpack_require__){(exports=__webpack_require__(87)(!1)).push([module.i,"",""]),module.exports=exports},733:function(module,exports,__webpack_require__){var api=__webpack_require__(86),content=__webpack_require__(734);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},734:function(module,exports,__webpack_require__){(exports=__webpack_require__(87)(!1)).push([module.i,".jigsaw-dots{box-sizing:border-box;position:absolute;width:8px;height:8px;background:#fff;border:1px solid #000}.jigsaw-dots__left-top{transform:translateX(-50%) translateY(-50%);cursor:nwse-resize}.jigsaw-dots__center-top{left:50%;transform:translateX(-50%) translateY(-50%);cursor:ns-resize}.jigsaw-dots__right-top{right:0;transform:translateX(50%) translateY(-50%);cursor:nesw-resize}.jigsaw-dots__left-center{top:50%;transform:translateX(-50%) translateY(-50%);cursor:ew-resize}.jigsaw-dots__right-center{right:0;top:50%;transform:translateX(50%) translateY(-50%);cursor:ew-resize}.jigsaw-dots__left-bottom{left:0px;bottom:0px;transform:translateX(-50%) translateY(50%);cursor:nesw-resize}.jigsaw-dots__center-bottom{left:50%;bottom:0;transform:translateX(-50%) translateY(50%);cursor:ns-resize}.jigsaw-dots__right-bottom{right:0;bottom:0;transform:translateX(50%) translateY(50%);cursor:nwse-resize}\n",""]),module.exports=exports},735:function(module,exports,__webpack_require__){var api=__webpack_require__(86),content=__webpack_require__(736);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},736:function(module,exports,__webpack_require__){(exports=__webpack_require__(87)(!1)).push([module.i,".jigsaw-wrapper{display:block;position:absolute}.jigsaw-wrapper__floor{position:relative;width:100%;background:#f3dede;box-sizing:border-box}.jigsaw-wrapper__floor--selected{border:1px solid #000}.jigsaw-wrapper__block{position:relative;width:100%;overflow:hidden}.jigsaw-wrapper__control{position:absolute;left:0;top:0;right:0;bottom:0;z-index:1;box-sizing:border-box}.jigsaw-wrapper--selected{border:1px solid #000;z-index:2}.jigsaw-wrapper--selected:hover{cursor:move}.jigsaw-wrapper--fixed{position:fixed;z-index:99999;pointer-events:none;box-shadow:#ccc 5px 5px 5px}\n",""]),module.exports=exports},737:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"WithContainer",(function(){return wrapper_stories_WithContainer}));__webpack_require__(77),__webpack_require__(40);var objectSpread2=__webpack_require__(3),slicedToArray=__webpack_require__(24),react=__webpack_require__(0),react_default=__webpack_require__.n(react),context=__webpack_require__(31),defineProperty=__webpack_require__(27),clsx_m=__webpack_require__(120),src_dots=(__webpack_require__(33),__webpack_require__(733),function Dots(_ref){var row=_ref.row,column=_ref.column,onMouseDown=_ref.onMouseDown;return react_default.a.createElement("div",{"data-testid":"dots",className:Object(clsx_m.a)("jigsaw-dots","jigsaw-dots__".concat(row,"-").concat(column)),onMouseDown:onMouseDown})});try{dots.displayName="dots",dots.__docgenInfo={description:"",displayName:"dots",props:{row:{defaultValue:null,description:"",name:"row",required:!0,type:{name:"enum",value:[{value:'"left"'},{value:'"center"'},{value:'"right"'}]}},column:{defaultValue:null,description:"",name:"column",required:!0,type:{name:"enum",value:[{value:'"center"'},{value:'"top"'},{value:'"bottom"'}]}},onMouseDown:{defaultValue:null,description:"",name:"onMouseDown",required:!0,type:{name:"(evt: MouseEvent<HTMLDivElement, MouseEvent>) => void"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/dots/index.tsx#dots"]={docgenInfo:dots.__docgenInfo,name:"dots",path:"src/dots/index.tsx#dots"})}catch(__react_docgen_typescript_loader_error){}var utils=__webpack_require__(20),dotsList=[["left","top"],["left","center"],["left","bottom"],["center","top"],["center","bottom"],["right","top"],["right","center"],["right","bottom"]],prefix="jigsaw-wrapper",getReverseBy=function getReverseBy(config,row,col){var num,dotsList=function getDotsLocBy(config){var x=config.x,y=config.y,width=config.width,height=config.height;if("number"!=typeof height)throw new Error("width/height should be a number");return[{x:x,y:y},{x:Object(utils.c)(width)?x+width:x,y:y},{x:x,y:y+height},{x:Object(utils.c)(width)?x+width:x,y:y+height}]}(config);return"left"===row&&"top"===col&&(num=3),"left"===row&&"center"===col&&(num=1),"left"===row&&"bottom"===col&&(num=1),"center"===row&&"top"===col&&(num=3),"center"===row&&"bottom"===col&&(num=0),"right"===row&&"top"===col&&(num=2),"right"===row&&"center"===col&&(num=0),"right"===row&&"bottom"===col&&(num=0),[dotsList[dotsList.length-1-num],dotsList[num]]},resolveMouseEffect=function resolveMouseEffect(firstLoc,realLoc){var x=firstLoc.x,y=firstLoc.y;return[realLoc.x<x?realLoc.x:x,realLoc.y<y?realLoc.y:y,Math.abs(realLoc.x-x),Math.abs(realLoc.y-y)]},getValidByRange=function getValidByRange(num,min,max){return num<min?min:num>max?max:num},wrapper_floor=function FloorWrapper(_ref){var id=_ref.id,children=_ref.children,_useContext=Object(react.useContext)(context.a),store=_useContext.store,setStore=_useContext.setStore,schema=store.schema,config=schema[id].config,isSelected=id&&store.activityId===id,height=config.height;return react_default.a.createElement("div",{style:{height:Object(utils.f)(height)},className:"".concat(prefix,"__floor"),onMouseEnter:function handleMouseEnter(){store.dragInfo.dragId&&(console.log("dragId",id),setStore(Object(objectSpread2.a)(Object(objectSpread2.a)({},store),{},{dragInfo:Object(objectSpread2.a)(Object(objectSpread2.a)({},store.dragInfo),{},{activeId:id})})))},id:"E".concat(id)},react_default.a.createElement("div",{className:Object(clsx_m.a)("".concat(prefix,"__control"),Object(defineProperty.a)({},"".concat(prefix,"__floor--selected"),isSelected)),onClick:function handleFloorClick(event){event.preventDefault(),setStore(Object(objectSpread2.a)(Object(objectSpread2.a)({},store),{},{activityId:id}))}},isSelected&&react_default.a.createElement(src_dots,{row:"center",column:"bottom",onMouseDown:function onMouseDown(evt){return function handleDotsMouseDown(event,row,col){event.preventDefault();var t1=Object(utils.h)(document.body,event.clientX,event.clientY),_getReverseBy=getReverseBy(config,row,col),_getReverseBy2=Object(slicedToArray.a)(_getReverseBy,2),m=_getReverseBy2[0],n=_getReverseBy2[1],handleMove=function handleMove(event){var realLoc,t2=Object(utils.h)(document.body,event.clientX,event.clientY),distance_x=t2.x-t1.x,distance_y=t2.y-t1.y;realLoc="center"===row?{x:m.x,y:m.y+distance_y}:"center"===col?{x:m.x+distance_x,y:m.y}:{x:m.x+distance_x,y:m.y+distance_y};var _resolveMouseEffect=resolveMouseEffect(n,realLoc),_resolveMouseEffect2=Object(slicedToArray.a)(_resolveMouseEffect,4),x=_resolveMouseEffect2[0],y=_resolveMouseEffect2[1],width=_resolveMouseEffect2[2],height=_resolveMouseEffect2[3];setStore(Object(objectSpread2.a)(Object(objectSpread2.a)({},store),{},{schema:Object(objectSpread2.a)(Object(objectSpread2.a)({},schema),{},Object(defineProperty.a)({},id,Object(objectSpread2.a)(Object(objectSpread2.a)({},schema[id]),{},{config:Object(objectSpread2.a)(Object(objectSpread2.a)({},schema[id].config),{},{x:x,y:y,width:width,height:height})})))}))};document.addEventListener("mousemove",handleMove),document.addEventListener("mouseup",(function handleMouseUp(){document.removeEventListener("mousemove",handleMove),document.removeEventListener("mouseup",handleMouseUp)}))}(evt,"center","bottom")}})),react_default.a.createElement("div",{style:{height:Object(utils.f)(height)},className:"".concat(prefix,"__block")},children))};try{floor.displayName="floor",floor.__docgenInfo={description:"",displayName:"floor",props:{id:{defaultValue:null,description:"",name:"id",required:!1,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/wrapper/floor.tsx#floor"]={docgenInfo:floor.__docgenInfo,name:"floor",path:"src/wrapper/floor.tsx#floor"})}catch(__react_docgen_typescript_loader_error){}__webpack_require__(64);var utils_schema=__webpack_require__(43),wrapper_widget=function WidgetWrapper(_ref){var id=_ref.id,children=_ref.children,_useContext=Object(react.useContext)(context.a),store=_useContext.store,setStore=_useContext.setStore,widgetRef=Object(react.useRef)(null),storeRef=Object(react.useRef)(null),schema=store.schema,config=schema[id].config,isSelected=id&&store.activityId===id,width=config.width,height=config.height,_config$x=config.x,x=void 0===_config$x?0:_config$x,_config$y=config.y,y=void 0===_config$y?0:_config$y,canDrag=config.canDrag;Object(react.useEffect)((function(){storeRef.current=store}),[store]);return react_default.a.createElement("div",{style:{width:Object(utils.f)(width),height:Object(utils.f)(height),left:Object(utils.f)(x),top:Object(utils.f)(y)},className:prefix,id:"E".concat(id),ref:widgetRef},react_default.a.createElement("div",{className:Object(clsx_m.a)("".concat(prefix,"__control"),Object(defineProperty.a)({},"".concat(prefix,"--selected"),isSelected)),onMouseDown:canDrag?function handleWidgetClick(event){event.preventDefault(),event.stopPropagation();var rect=event.target.getBoundingClientRect(),deltaX=event.clientX-rect.x,deltaY=event.clientY-rect.y;widgetRef.current.classList.add("".concat(prefix,"--fixed"));var wrapperId=Object(utils.b)(schema,schema[id]);setStore(Object(objectSpread2.a)(Object(objectSpread2.a)({},store),{},{activityId:id,dragInfo:{dragId:id,activeId:wrapperId,deltaX:deltaX,deltaY:deltaY},schema:Object(objectSpread2.a)(Object(objectSpread2.a)({},schema),{},Object(defineProperty.a)({},id,Object(objectSpread2.a)(Object(objectSpread2.a)({},schema[id]),{},{config:Object(objectSpread2.a)(Object(objectSpread2.a)({},schema[id].config),{},{x:rect.x,y:rect.y})})))}));var handleWidgetMove=function handleWidgetMove(event){event.preventDefault(),event.stopPropagation();var location_x=event.clientX-deltaX,location_y=event.clientY-deltaY,ele=document.querySelector("#E".concat(id));Object.assign(ele.style,{left:location_x+"px",top:location_y+"px"})};document.addEventListener("mousemove",handleWidgetMove),document.addEventListener("mouseup",(function handleWidgetUp(event){widgetRef.current.classList.remove("".concat(prefix,"--fixed"));var _storeRef$current=storeRef.current,schema=_storeRef$current.schema,dragInfo=_storeRef$current.dragInfo,dragId=dragInfo.dragId,activeId=dragInfo.activeId,realSchema=schema;wrapperId!==activeId&&(realSchema=Object(utils_schema.h)(schema,dragId,activeId));var wrapEle=document.querySelector("#E".concat(activeId)),_wrapEle$getBoundingC=wrapEle.getBoundingClientRect(),x=_wrapEle$getBoundingC.x,y=_wrapEle$getBoundingC.y,width=_wrapEle$getBoundingC.width,height=_wrapEle$getBoundingC.height;if(wrapEle){var realLocation={x:getValidByRange(event.clientX-deltaX-x,-config.width/2,width-config.width/2),y:getValidByRange(event.clientY-deltaY-y,-config.height/2,height-config.height/2)};setStore(Object(objectSpread2.a)(Object(objectSpread2.a)({},storeRef.current),{},{dragInfo:{},schema:Object(objectSpread2.a)(Object(objectSpread2.a)({},realSchema),{},Object(defineProperty.a)({},id,Object(objectSpread2.a)(Object(objectSpread2.a)({},realSchema[id]),{},{config:Object(objectSpread2.a)(Object(objectSpread2.a)({},realSchema[id].config),{},{x:realLocation.x,y:realLocation.y})})))})),document.removeEventListener("mousemove",handleWidgetMove),document.removeEventListener("mouseup",handleWidgetUp)}}))}:null},isSelected&&dotsList.map((function(_ref2,index){var _ref3=Object(slicedToArray.a)(_ref2,2),row=_ref3[0],col=_ref3[1];return react_default.a.createElement(src_dots,{key:index,row:row,column:col,onMouseDown:function onMouseDown(evt){return function handleDotsMouseDown(event,row,col){event.preventDefault(),event.stopPropagation();var t1=Object(utils.h)(document.body,event.clientX,event.clientY),_getReverseBy=getReverseBy(config,row,col),_getReverseBy2=Object(slicedToArray.a)(_getReverseBy,2),m=_getReverseBy2[0],n=_getReverseBy2[1],handleMove=function handleMove(event){event.preventDefault(),event.stopPropagation();var realLoc,t2=Object(utils.h)(document.body,event.clientX,event.clientY),distance_x=t2.x-t1.x,distance_y=t2.y-t1.y;realLoc="center"===row?{x:m.x,y:m.y+distance_y}:"center"===col?{x:m.x+distance_x,y:m.y}:{x:m.x+distance_x,y:m.y+distance_y};var _resolveMouseEffect=resolveMouseEffect(n,realLoc),_resolveMouseEffect2=Object(slicedToArray.a)(_resolveMouseEffect,4),x=_resolveMouseEffect2[0],y=_resolveMouseEffect2[1],width=_resolveMouseEffect2[2],height=_resolveMouseEffect2[3];setStore(Object(objectSpread2.a)(Object(objectSpread2.a)({},store),{},{schema:Object(objectSpread2.a)(Object(objectSpread2.a)({},schema),{},Object(defineProperty.a)({},id,Object(objectSpread2.a)(Object(objectSpread2.a)({},schema[id]),{},{config:Object(objectSpread2.a)(Object(objectSpread2.a)({},schema[id].config),{},{x:x,y:y,width:width,height:height})})))}))};document.addEventListener("mousemove",handleMove),document.addEventListener("mouseup",(function handleMouseUp(){document.removeEventListener("mousemove",handleMove),document.removeEventListener("mouseup",handleMouseUp)}))}(evt,row,col)}})}))),children)};try{widget.displayName="widget",widget.__docgenInfo={description:"",displayName:"widget",props:{id:{defaultValue:null,description:"",name:"id",required:!1,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/wrapper/widget.tsx#widget"]={docgenInfo:widget.__docgenInfo,name:"widget",path:"src/wrapper/widget.tsx#widget"})}catch(__react_docgen_typescript_loader_error){}__webpack_require__(735);var src_wrapper=function Wrapper(_ref){var id=_ref.id,children=_ref.children,name=Object(react.useContext)(context.a).store.schema[id].manifest.name;return"App"===name?react_default.a.createElement(react_default.a.Fragment,null,children):"Floor"===name?react_default.a.createElement(wrapper_floor,{id:id},children):react_default.a.createElement(wrapper_widget,{id:id},children)};try{wrapper.displayName="wrapper",wrapper.__docgenInfo={description:"",displayName:"wrapper",props:{id:{defaultValue:null,description:"",name:"id",required:!1,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/wrapper/index.tsx#wrapper"]={docgenInfo:wrapper.__docgenInfo,name:"wrapper",path:"src/wrapper/index.tsx#wrapper"})}catch(__react_docgen_typescript_loader_error){}var src_widget=__webpack_require__(150),components=__webpack_require__(151),wrapper_stories_Container=function Container(){var _useState=Object(react.useState)(context.b.store),_useState2=Object(slicedToArray.a)(_useState,2),store=_useState2[0],setStore=_useState2[1];Object(react.useEffect)((function(){var manifestList=["Floor"].map((function(name){return components.a[name].manifest})),_initBy=Object(utils_schema.g)(store,manifestList),_initBy2=Object(slicedToArray.a)(_initBy,2),newSchema=_initBy2[0],lastId=_initBy2[1];setStore(Object(objectSpread2.a)(Object(objectSpread2.a)({},store),{},{activityId:lastId,schema:newSchema}))}),[]);var value={store:store,setStore:setStore};return react_default.a.createElement("div",null,react_default.a.createElement(context.a.Provider,{value:value},react_default.a.createElement("div",{onClick:function handleFloorAdd(){var newStore=Object(utils_schema.b)(store,"BOTTOM");setStore(newStore)}},"添加楼层"),react_default.a.createElement(src_widget.a,{manifest:{name:"Button",version:"1.0.0"}},react_default.a.createElement("div",null,"Button")),react_default.a.createElement(src_widget.a,{manifest:{name:"Card",version:"1.0.0"}},react_default.a.createElement("div",null,"Card")),react_default.a.createElement("div",{style:{marginLeft:100,position:"relative",width:375}},function renderWrapper(scheme){var childrenId=scheme.childrenId,id=scheme.id,manifest=(scheme.config,scheme.manifest),props=scheme.props,component=components.a[manifest.name],getChildren=0!==childrenId.length?childrenId.map((function(id){return renderWrapper(store.schema[id])})):null;return react_default.a.createElement(src_wrapper,{key:id,id:id},Object(react.createElement)(component.view,props,getChildren))}(store.schema.App))))},wrapper_stories_WithContainer=(__webpack_exports__.default={title:"Wrapper"},function WithContainer(){return react_default.a.createElement(wrapper_stories_Container,null)})},738:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"WithBar",(function(){return container_stories_WithBar})),__webpack_require__.d(__webpack_exports__,"WithBaz",(function(){return container_stories_WithBaz}));var react=__webpack_require__(0),react_default=__webpack_require__.n(react),slicedToArray=__webpack_require__(24),context=__webpack_require__(31),src_container_container=(__webpack_require__(727),function container(_ref){var foo=_ref.foo,_useState=Object(react.useState)(null),_useState2=Object(slicedToArray.a)(_useState,2),value={store:_useState2[0],setStore:_useState2[1]};return react_default.a.createElement(context.a.Provider,{value:value},react_default.a.createElement("div",{"data-testid":"container",className:"foo-bar"},foo))}),src_container=src_container_container;try{src_container_container.displayName="container",src_container_container.__docgenInfo={description:"",displayName:"container",props:{foo:{defaultValue:null,description:"",name:"foo",required:!0,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/container/index.tsx#container"]={docgenInfo:src_container_container.__docgenInfo,name:"container",path:"src/container/index.tsx#container"})}catch(__react_docgen_typescript_loader_error){}__webpack_exports__.default={title:"Container"};var container_stories_WithBar=function WithBar(){return react_default.a.createElement(src_container,{foo:"bar"})},container_stories_WithBaz=function WithBaz(){return react_default.a.createElement(src_container,{foo:"baz"})}}},[[360,1,2]]]);
//# sourceMappingURL=main.7b318c6ac5bcedef2af3.bundle.js.map